#############################################
# ini4j conf #
#############################################

#运行基本信息,每条语句运行间隔单位(秒),
[runInfo]
timeInterval=10

#各个支行信息配置
[branch]
branchOrder=1
branchCode=461100
branchName=总行营业部

[branch]
branchOrder=8
branchCode=461103
branchName=海甸支行

[branch]
branchOrder=9
branchCode=461101
branchName=滨海支行

[branch]
branchOrder=10
branchCode=461102
branchName=红城湖支行

[branch]
branchOrder=11
branchCode=461104
branchName=五源河支行

[branch]
branchOrder=7
branchCode=466611
branchName=文昌支行

[branch]
branchOrder=3
branchCode=466601
branchName=琼海支行

[branch]
branchOrder=5
branchCode=466631
branchName=万宁支行

[branch]
branchOrder=6
branchCode=462231
branchName=陵水支行

[branch]
branchOrder=16
branchCode=465531
branchName=昌江支行

[branch]
branchOrder=17
branchCode=465502
branchName=洋浦支行

[branch]
branchOrder=13
branchCode=465551
branchName=澄迈科技支行

[branch]
branchOrder=22
branchCode=466621
branchName=定安支行

[branch]
branchOrder=23
branchCode=463301
branchName=三沙支行

[branch]
branchOrder=15
branchCode=462241
branchName=乐东支行

[branch]
branchOrder=24
branchCode=465561
branchName=白沙支行

[branch]
branchOrder=25
branchCode=462251
branchName=保亭支行

[branch]
branchOrder=12
branchCode=465552
branchName=澄迈支行

[branch]
branchOrder=14
branchCode=465541
branchName=东方支行

[branch]
branchOrder=18
branchCode=467701
branchName=五指山支行

[branch]
branchOrder=19
branchCode=465521
branchName=临高支行

[branch]
branchOrder=20
branchCode=467711
branchName=屯昌支行

[branch]
branchOrder=21
branchCode=467721
branchName=琼中支行

[branch]
branchOrder=26
branchCode=461998
branchName=电子银行

[branch]
branchOrder=4
branchCode=465501
branchName=儋州分行
[branch]
branchOrder=2
branchCode=462201
branchName=三亚分行

#SPL语句配置

#海南银行业务监控 序号 各支行与他行收入金额
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events trade_code=6234 (business_type=4* chanel_type IN (HVPS,LVPS,IBPS,ECPP)) OR (chanel_type=CARD business_type=2*) earliest=-10m latest=now | dedup trade_number | stats sum(trade_amount) as trade_amount_in by accounting_institution
spl_field=accounting_institution,trade_amount_in
pojo_field=branchCode,otherBankInAmountNew


#海南银行业务监控 序号 各支行与他行支出金额
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events trade_code=6234 business_type=3* chanel_type IN (HVPS,LVPS,IBPS,EPCC) earliest=-10m latest=now| dedup trade_number | bin span=m _time | stats sum(trade_amount) as trade_amount_out by accounting_institution
spl_field=accounting_institution,trade_amount_out
pojo_field=branchCode,otherBankOutAmountNew

#海南银行业务交易监控 序号2 返回全行交易总额
[spl]
type=map
key=totalTransAmount
spl=search index=trade_successful_events trade_code=6234 earliest=@d |dedup trade_number | stats sum(trade_amount) as trade_sum
spl_field=trade_sum
pojo_field=totalTransAmount

#海南银行业务交易监控 序号3返回全行交易总交易笔数
[spl]
type=map
key=totalTransCount
spl=search index=trade_successful_events trade_code=6234 earliest=@d |dedup trade_number | stats count
spl_field=count
pojo_field=totalTransCount

#海南银行业务交易监控 序号13返回各支行对公开户业务数
[spl]
type=object
key=TransDayData
spl=search index="trade_successful_events" "0160=2105" OR "0160=2106" earliest=@d |dedup trade_number|stats count by accounting_institution
spl_field=accounting_institution,count
pojo_field=branchCode,accountOpenNumPub

#海南银行业务交易监控 序号12返回各支行对私开户业务数
[spl]
type=object
key=TransDayData
spl=search index="trade_successful_events" "0160=2100" OR "0160=2114" earliest=@d|dedup trade_number |stats count by accounting_institution
spl_field=accounting_institution,count
pojo_field=branchCode,accountOpenNumPri

#海南银行业务交易监控 序号17 返回各支行业务笔数
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events earliest=@d |dedup trade_number |stats count by accounting_institution
spl_field=accounting_institution,count
pojo_field=branchCode,transCountTotal

#海南银行业务交易监控 序号18返回各支行支出金额
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events trade_code=6234 business_type=3* earliest=@d |dedup trade_number | stats sum(trade_amount) as trade_amount,by accounting_institution | fields trade_amount,accounting_institution
spl_field=accounting_institution,trade_amount
pojo_field=branchCode,transOutAmount

#海南银行业务交易监控 序号19 返回各支行收入金额
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events trade_code=6234 business_type=4* earliest=@d |dedup trade_number | stats sum(trade_amount) as trade_amount,by accounting_institution | fields trade_amount,accounting_institution
spl_field=accounting_institution,trade_amount
pojo_field=branchCode,transInAmount

#海南银行业务交易监控 序号8返回各支行对公支出和收入金额
[spl]
type=object
key=TransDayData
spl=search eventtype="enterprise_trans_out" OR eventtype="enterprise_trans_in" earliest=@d | dedup trade_number | chart sum(trade_amount) by accounting_institution,eventtype
spl_field=accounting_institution,enterprise_trans_out,enterprise_trans_in
pojo_field=branchCode,publicOutAmount,publicInAmount

#返回各支行对公收入金额
#[spl]
#type=object
#key=TransDayData
#spl=search index=main earliest=-200d@d
#spl_field=accounting_institution,count
#pojo_field=branchCode,publicInAmount

#海南银行业务交易监控 序号9 返回各支行对私支出和收入金额
[spl]
type=object
key=TransDayData
spl=search eventtype="personal_trans_out" OR eventtype="personal_trans_in" earliest=@d | dedup trade_number | chart sum(trade_amount) by accounting_institution,eventtype
spl_field=accounting_institution,personal_trans_out,personal_trans_in
pojo_field=branchCode,privateOutAmount,privateInAmount

#返回各支行对私收入金额
#[spl]
#type=object
#key=TransDayData
#spl=search index=main earliest=-200d@d
#spl_field=accounting_institution,count
#pojo_field=branchCode,privateInAmount

#海南银行业务交易监控 序号18返回各支行他行支出金额
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events trade_code=6234 business_type=3* chanel_type IN (HVPS,LVPS,IBPS,EPCC) earliest=@d| dedup trade_number | bin span=1d _time | stats sum(trade_amount) as trade_amount_out by _time,accounting_institution
spl_field=accounting_institution,trade_amount_out
pojo_field=branchCode,otherBankOutAmount

#海南银行业务交易监控 序号19 返回各支行他行收入出金额
[spl]
type=object
key=TransDayData
spl=search index=trade_successful_events trade_code=6234 (business_type=4* chanel_type IN (HVPS,LVPS,IBPS,ECPP)) OR (chanel_type=CARD business_type=2*) earliest=@d|dedup trade_number| bin span=1d _time | stats sum(trade_amount) as trade_amount_in by _time,accounting_institution
spl_field=accounting_institution,trade_amount_in
pojo_field=branchCode,otherBankInAmount

#海南银行业务交易监控 序号20 总资产总负债
[spl]
type=list
key=totalAssets
spl=search index="hnb_ods_spl" | sort datetime desc limit=7 |rename datetime as date|fields date,total_assets,total_liabilities |sort date asc
spl_field=date,total_assets,total_liabilities
pojo_field=date,totalAsset,totalLiability
